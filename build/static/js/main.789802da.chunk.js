(this.webpackJsonpkanban=this.webpackJsonpkanban||[]).push([[0],{38:function(e,t,n){},43:function(e,t,n){e.exports=n(90)},52:function(e,t,n){},53:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(17),d=n.n(r),o=n(1),l=(n(52),n(9)),u=(n(53),function(e){var t=e.card,n=e.index;return a.a.createElement(l.b,{draggableId:t.id,index:n},(function(e){return a.a.createElement("div",Object.assign({className:"card"},e.draggableProps,e.dragHandleProps,{ref:e.innerRef}),t.text)}))}),i=Object(o.b)((function(e,t){return{card:e.cards.byId[t.cardId]}}))(u),s=n(10),b=0,m=(n(38),Object(o.b)()((function(e){var t=e.columnId,n=e.dispatch,r=Object(c.useState)(""),d=Object(s.a)(r,2),o=d[0],l=d[1],u=Object(c.useState)(!1),i=Object(s.a)(u,2),m=i[0],f=i[1],I=Object(c.useRef)(),O=Object(c.useRef)(),E=function(e){I.current.contains(e.target)||f(!1)};return Object(c.useEffect)((function(){return m?(O.current.focus(),document.addEventListener("mousedown",E)):document.removeEventListener("mousedown",E),function(){document.removeEventListener("mousedown",E)}}),[m]),a.a.createElement("div",{className:"add-block",ref:I},m?a.a.createElement("form",{action:"",onSubmit:function(e){e.preventDefault(),o.trim()&&(n(function(e,t){return{type:"ADD_CARD",cardId:"card_".concat(b++),cardText:e,columnId:t}}(o,t)),l(""),f(!1))}},a.a.createElement("textarea",{ref:O,className:"add-block__textarea",value:o,rows:"1",onChange:function(e){l(e.target.value),O.current.style.height="inherit",O.current.style.height="".concat(e.target.scrollHeight,"px")},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438",required:!0}),a.a.createElement("div",{className:"add-block__controls"},a.a.createElement("button",{className:"add-block__submit",type:"submit"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443"),a.a.createElement("button",{className:"add-block__cancel",onClick:function(){f(!1),l("")}}))):a.a.createElement("button",{className:"add-block__btn",onClick:function(){return f(!0)}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0435\u0449\u0435 \u043e\u0434\u043d\u0443 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443"))}))),f=(n(88),function(e){var t=e.column,n=Object(c.useRef)();return Object(c.useEffect)((function(){var e=n.current,t=e.scrollHeight-e.clientHeight;n.current.scrollTop=t>0?t:0})),a.a.createElement("div",{className:"column"},a.a.createElement("div",{className:"column__title"},t.title),a.a.createElement("div",{className:"column__content",ref:n},a.a.createElement(l.c,{droppableId:String(t.id)},(function(e){return a.a.createElement("div",Object.assign({className:"column__inner",ref:e.innerRef},e.droppableProps),t.cards.map((function(e,t){return a.a.createElement(i,{key:e,cardId:e,index:t})})),e.placeholder)}))),a.a.createElement(m,{columnId:t.id}))}),I=Object(o.b)((function(e,t){return{column:e.columns.byId[t.columnId],index:t.index}}))(f),O=Object(o.b)()((function(e){var t=e.dispatch,n=Object(c.useState)(""),r=Object(s.a)(n,2),d=r[0],o=r[1],l=Object(c.useState)(!1),u=Object(s.a)(l,2),i=u[0],m=u[1],f=Object(c.useRef)(),I=Object(c.useRef)(),O=function(e){f.current.contains(e.target)||m(!1)};Object(c.useEffect)((function(){return i?(I.current.focus(),document.addEventListener("mousedown",O)):document.removeEventListener("mousedown",O),function(){document.removeEventListener("mousedown",O)}}),[i]);return a.a.createElement("div",{className:"column column_adder add-block",ref:f},i?a.a.createElement("form",{action:"",onSubmit:function(e){var n;(e.preventDefault(),d.trim())&&(t((n=d,{type:"ADD_COLUMN",columnId:"column_".concat(b++),columnTitle:n,columnCards:[]})),o(""),m(!1))}},a.a.createElement("input",{className:"add-block__input",value:d,ref:I,onChange:function(e){o(e.target.value)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043b\u043e\u043d\u043a\u0438",required:!0}),a.a.createElement("div",{className:"add-block__controls"},a.a.createElement("button",{className:"add-block__submit",type:"submit"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043b\u043e\u043d\u043a\u0443"),a.a.createElement("button",{className:"add-block__cancel",onClick:function(){m(!1),o("")}}))):a.a.createElement("button",{className:"add-block__btn",onClick:function(){return m(!0)}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0435\u0449\u0435 \u043e\u0434\u043d\u0443 \u043a\u043e\u043b\u043e\u043d\u043a\u0443"))})),E=(n(89),function(e){var t=e.columnsId,n=e.onDragEnd;return a.a.createElement("div",{className:"board"},a.a.createElement("div",{className:"board__wrapper"},a.a.createElement(l.a,{onDragEnd:n},t.map((function(e){return a.a.createElement(I,{key:e,columnId:e})})),a.a.createElement(O,null))))}),_=Object(o.b)((function(e){return{columnsId:e.columns.allIds}}),(function(e){return{onDragEnd:function(t){return function(e,t){var n=e.destination,c=e.source,a=e.draggableId;n&&(n.droppableId===c.droppableId&&n.index===c.index||t(function(e,t,n){return{type:"MOVE_CARD",source:e,destination:t,draggableId:n}}(c,n,a)))}(t,e)}}}))(E);var p=function(){return a.a.createElement("div",{className:"app"},a.a.createElement(_,null))},v=n(3),j=n(11),g=n(4),y=n(2);var N=Object(v.c)({cards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{byId:{},allIds:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CARD":return{byId:Object(y.a)({},e.byId,Object(g.a)({},t.cardId,{id:t.cardId,text:t.cardText})),allIds:[].concat(Object(j.a)(e.allIds),[t.cardId])};default:return e}},columns:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{byId:{},allIds:[]},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"ADD_COLUMN":return{byId:Object(y.a)({},t.byId,Object(g.a)({},n.columnId,{id:n.columnId,title:n.columnTitle,cards:n.columnCards})),allIds:[].concat(Object(j.a)(t.allIds),[n.columnId])};case"ADD_CARD":return Object(y.a)({},t,{byId:Object(y.a)({},t.byId,Object(g.a)({},n.columnId,Object(y.a)({},t.byId[n.columnId],{cards:[].concat(Object(j.a)(t.byId[n.columnId].cards),[n.cardId])})))});case"MOVE_CARD":var c=n.source,a=n.destination,r=n.draggableId,d=t.byId[c.droppableId],o=t.byId[a.droppableId];if(d===o){var l=d.cards.slice();return l.splice(c.index,1),l.splice(a.index,0,r),Object(y.a)({},t,{byId:Object(y.a)({},t.byId,Object(g.a)({},d.id,Object(y.a)({},d,{cards:l})))})}var u=d.cards.slice();u.splice(c.index,1);var i=o.cards.slice();return i.splice(a.index,0,r),Object(y.a)({},t,{byId:Object(y.a)({},t.byId,(e={},Object(g.a)(e,d.id,Object(y.a)({},d,{cards:u})),Object(g.a)(e,o.id,Object(y.a)({},o,{cards:i})),e))});default:return t}}}),h=Object(v.e)(N,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());d.a.render(a.a.createElement(o.a,{store:h},a.a.createElement(p,null)),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.789802da.chunk.js.map